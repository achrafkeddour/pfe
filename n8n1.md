# 🎯 Système intelligent d'auto-maintenance pour réseau 5G Core (Version équilibrée + ML prédictif)

> **Concevoir un système intelligent d'auto-maintenance pour réseau 5G Core**, combinant **monitoring temps réel**, **analyse par IA générative**, **prédiction proactive par ML**, **orchestration automatisée** et **auto-réparation**, pour réduire les temps d'intervention humaine et améliorer la disponibilité du réseau.

---

## ⚙️ Architecture globale équilibrée avec ML prédictif

```
┌─────────────────────────────────────────────────────────────┐
│                    RÉSEAU 5G CORE (Free5GC)                 │
│              AMF │ SMF │ UPF │ NRF │ UDM │ AUSF              │
└────────────────────────────┬────────────────────────────────┘
                             │
            ┌────────────────┴────────────────┐
            │                                 │
┌───────────▼──────────┐          ┌──────────▼─────────────┐
│  MONITORING LAYER    │          │    LOG MANAGEMENT      │
│  • Prometheus        │          │    • Filebeat/Syslog   │
│  • Grafana           │          │    • Elasticsearch     │
│  • Alerting          │          │    • Log parsing       │
└───────────┬──────────┘          └──────────┬─────────────┘
            │                                 │
            └────────────────┬────────────────┘
                             │
                ┌────────────▼────────────┐
                │  ORCHESTRATION LAYER    │
                │  • n8n workflows        │
                │  • Event management     │
                │  • Decision logic       │
                └────────────┬────────────┘
                             │
            ┌────────────────┼────────────────┬──────────────┐
            │                │                │              │
┌───────────▼────────┐  ┌────▼──────┐  ┌─────▼──────┐  ┌───▼────────┐
│   IA GÉNÉRATIVE    │  │  MODÈLE   │  │  SCRIPTS   │  │NOTIFICATION│
│   • Analyse logs   │  │    ML     │  │  AUTO-     │  │ • Slack    │
│   • Diagnostic     │  │ PRÉDICTIF │  │  REPAIR    │  │ • Email    │
│   • Suggestions    │  │• Anomalies│  │  • SSH     │  │ • Dashboard│
│   (GPT/Ollama)     │  │• Tendances│  │  • API     │  │ • Alertes  │
└────────────────────┘  └───────────┘  └────────────┘  └────────────┘
                             │
                ┌────────────▼────────────┐
                │   INTERFACE HUMAINE     │
                │   • Dashboard Streamlit │
                │   • Chatbot assistant   │
                │   • Historique incidents│
                │   • Prédictions ML      │
                └─────────────────────────┘
```

---

## 🧩 Composants principaux (poids équilibré)

### 1️⃣ **Couche Réseau 5G** (Foundation)
**Free5GC** comme réseau de test :
- Déploiement des fonctions NF (AMF, SMF, UPF, etc.)
- Génération de trafic et scénarios de panne
- Configuration de slices réseau pour tests

**Importance** : 20% — C'est la base du système

---

### 2️⃣ **Couche Monitoring & Observabilité** (Eyes)
**Prometheus + Grafana** :
- Collecte métriques temps réel (CPU, mémoire, sessions)
- Dashboards de visualisation
- Système d'alerting (seuils dépassés)

**Elasticsearch + Filebeat** :
- Agrégation centralisée des logs
- Recherche et indexation
- Parsing structuré des erreurs

**Importance** : 20% — Sans observation, pas de détection

---

### 3️⃣ **Couche Intelligence Artificielle** (Brain)

#### A. **IA Générative (Réactive)**
**LLM (GPT-4 / Ollama Llama 3 / Mistral)** :
- Analyse contextuelle des logs
- Diagnostic des causes racines (*root cause analysis*)
- Génération de recommandations en langage naturel
- Suggestion de commandes de réparation

#### B. **Machine Learning Prédictif (Proactive)** 🆕
**Modèle d'apprentissage automatique** :
- **Détection d'anomalies** : Identification de comportements inhabituels avant défaillance
- **Prédiction de pannes** : Anticipation des défaillances 15-60 min à l'avance
- **Analyse de tendances** : Identification de dégradations progressives
- **Score de santé** : Évaluation continue de l'état de chaque NF

**Technologies ML utilisées** :
- **Isolation Forest** ou **AutoEncoder** pour détection d'anomalies
- **LSTM** ou **Prophet** pour prédiction de séries temporelles
- **Random Forest** pour classification des types de pannes
- **Scikit-learn, TensorFlow/PyTorch** pour implémentation

**Importance** : 30% — Le cerveau décisionnel du système (réactif + proactif)

---

### 4️⃣ **Couche Orchestration & Automatisation** (Hands)
**n8n Workflow Automation** :
- Orchestration des flux de traitement
- Routage conditionnel (si X → faire Y)
- Intégration entre tous les composants
- Gestion des états et files d'attente

**Scripts d'auto-réparation** :
- Redémarrage de services (systemctl, Docker)
- Modification de configurations
- Rescaling automatique (Kubernetes)
- Nettoyage de ressources

**Importance** : 20% — Transforme l'analyse en action

---

### 5️⃣ **Couche Interface Utilisateur** (Interface)
**Dashboard Streamlit** :
- Vue d'ensemble de l'état du réseau
- **Prédictions ML en temps réel** 🆕
- Historique des incidents et résolutions
- Interface chatbot pour interaction IA
- Visualisation des workflows actifs
- **Graphiques de tendances et alertes prédictives** 🆕

**Notifications** :
- Alertes temps réel (Slack, Email)
- **Alertes préventives basées sur ML** 🆕
- Rapports d'incident automatiques
- Logs des actions entreprises

**Importance** : 10% — Crucial pour la démo et l'utilisabilité

---

## 🔄 Flux de traitement complet

### Scénario 1 : **Mode Réactif - Panne de l'UPF**

```
1. DÉTECTION
   Prometheus détecte : UPF_Sessions = 0 pendant 2 min
   Grafana déclenche alerte → Webhook vers n8n
   
2. COLLECTE
   n8n workflow activé :
   → Récupération logs UPF (Elasticsearch, 10 dernières min)
   → Récupération métriques système (Prometheus)
   → Vérification état service (SSH)
   
3. ANALYSE IA GÉNÉRATIVE
   n8n envoie contexte au LLM :
   ┌─────────────────────────────────────────┐
   │ Logs: [UPF] PFCP session establishment  │
   │ failed: connection timeout              │
   │ Metrics: CPU 2%, Memory 45%, Network OK │
   │ Service status: inactive (dead)         │
   └─────────────────────────────────────────┘
   
   LLM répond :
   ┌─────────────────────────────────────────┐
   │ Diagnostic: Service UPF arrêté          │
   │ Cause probable: Crash ou arrêt manuel   │
   │ Priorité: CRITIQUE                      │
   │ Action recommandée:                     │
   │   systemctl restart free5gc-upf         │
   │ Vérification post-repair:               │
   │   curl http://upf:8805/health           │
   └─────────────────────────────────────────┘
   
4. DÉCISION
   n8n évalue la criticité :
   IF priorité == "CRITIQUE" AND confidence > 80%
   → Exécution automatique
   ELSE
   → Notification humaine pour validation
   
5. EXÉCUTION
   n8n exécute via SSH :
   → systemctl restart free5gc-upf
   → Attendre 10s
   → Vérifier health check
   
6. VALIDATION
   → Prometheus confirme : UPF_Sessions > 0
   → n8n enregistre l'incident (historique)
   → Notification Slack : "✅ UPF restauré (auto)"
   
7. INTERFACE
   Dashboard Streamlit affiche :
   • Timeline de l'incident (2min 34s)
   • Actions entreprises
   • Diagnostic IA
   • Graphiques avant/après
```

---

### Scénario 2 : **Mode Prédictif - Anticipation de panne** 🆕

```
1. MONITORING CONTINU
   Modèle ML analyse en continu (toutes les 30s) :
   → Métriques Prometheus (CPU, RAM, sessions, latence)
   → Patterns de logs (fréquence erreurs)
   → Historique des pannes passées
   
2. DÉTECTION D'ANOMALIE
   ML détecte à t=0 :
   ┌─────────────────────────────────────────┐
   │ AMF - Anomalie détectée                 │
   │ • CPU: augmentation linéaire (20→65%)   │
   │ • Mémoire: croissance anormale          │
   │ • Latence NGAP: +150ms                  │
   │ • Score d'anomalie: 0.87 / 1.0          │
   │                                         │
   │ Prédiction: Panne probable dans 25 min │
   │ Confiance: 82%                          │
   │ Type probable: Memory leak              │
   └─────────────────────────────────────────┘
   
3. ALERTE PRÉVENTIVE
   n8n workflow "Prédiction" activé :
   → Notification Slack : "⚠️ Alerte prédictive AMF"
   → Collecte contexte détaillé
   → Décision : Action préventive ou surveillance renforcée
   
4. ANALYSE APPROFONDIE
   Option A - IA Générative consultée :
   "Analyse ces métriques anormales et suggère une action préventive"
   
   LLM répond :
   ┌─────────────────────────────────────────┐
   │ Pattern identifié: Memory leak probable │
   │ Action préventive recommandée:          │
   │   1. Redémarrage planifié AMF           │
   │   2. Ou: nettoyer cache manuellement    │
   │ Impact: 5s d'interruption max           │
   │ Meilleur moment: dans 10 min (trafic ↓)│
   └─────────────────────────────────────────┘
   
   Option B - Action automatique simple :
   IF score_anomalie > 0.85 AND type == "memory_leak"
   → Planifier redémarrage pendant fenêtre maintenance
   
5. EXÉCUTION PRÉVENTIVE
   À t+10min (fenêtre de faible trafic) :
   → n8n exécute : systemctl restart free5gc-amf
   → Monitoring intensif post-restart
   → Vérification : anomalie résolue ✅
   
6. VALIDATION & FEEDBACK
   → ML enregistre : "Prédiction correcte → Action réussie"
   → Mise à jour modèle avec nouveau cas
   → Dashboard : "🎯 Panne évitée grâce à ML"
   
7. RÉSULTAT
   ✅ Panne évitée avant impact utilisateur
   ✅ MTTR = 0 (maintenance prédictive)
   ✅ Disponibilité préservée
```

---

## 🤖 Détails du Modèle ML Prédictif

### Architecture ML

```
┌──────────────────────────────────────────────────────┐
│           PIPELINE DE PRÉDICTION ML                  │
└──────────────────────────────────────────────────────┘

1. COLLECTE DE DONNÉES
   ├─ Métriques Prometheus (time series)
   ├─ Logs structurés (events)
   └─ Historique incidents (labels)

2. FEATURE ENGINEERING
   ├─ Agrégation temporelle (1min, 5min, 15min)
   ├─ Calcul dérivées (tendances)
   ├─ Statistiques glissantes (mean, std, max)
   └─ Encodage événements logs

3. MODÈLES ML (ensemble)
   ├─ Isolation Forest → Anomalies
   ├─ LSTM → Prédiction séries temporelles
   ├─ Random Forest → Classification type panne
   └─ AutoEncoder → Détection patterns anormaux

4. POST-TRAITEMENT
   ├─ Calcul score composite
   ├─ Estimation temps avant panne
   ├─ Niveau de confiance
   └─ Type de panne probable

5. DÉCISION & ACTION
   └─ Déclenchement workflow n8n si score > seuil
```

### Métriques surveillées par le ML

| Catégorie | Métriques | Fenêtre d'analyse |
|-----------|-----------|-------------------|
| **CPU** | Utilisation, load avg, contexte switches | 1-15 min |
| **Mémoire** | Utilisation, swap, cache | 1-15 min |
| **Réseau** | Throughput, erreurs, latence | 1-5 min |
| **Sessions 5G** | Nombre actif, taux échec, durée moyenne | 5-30 min |
| **Logs** | Fréquence erreurs, nouveaux types d'erreurs | 1-10 min |
| **Services** | Restarts, temps réponse API | Temps réel |

### Types de pannes détectables

| Type de panne | Indicateurs ML | Temps prédiction |
|---------------|----------------|------------------|
| **Memory leak** | RAM↑ linéaire, swap↑ | 20-60 min |
| **CPU saturation** | CPU↑ exponentiel, latence↑ | 10-30 min |
| **Crash imminent** | Restarts fréquents, erreurs↑ | 5-15 min |
| **Dégradation réseau** | Latence↑, packet loss↑ | 15-45 min |
| **Surchauffe disque** | I/O wait↑, throughput↓ | 30-90 min |

---

## 🛠️ Stack technologique complète (mise à jour)

| Composant | Technologies | Rôle principal |
|-----------|-------------|----------------|
| **5G Core** | Free5GC | Environnement de test |
| **Monitoring** | Prometheus, Grafana | Métriques & alertes |
| **Logs** | Elasticsearch, Filebeat, Logstash | Agrégation logs |
| **Orchestration** | n8n | Coordination workflows |
| **IA Générative** | OpenAI API / Ollama (Llama 3, Mistral) | Analyse intelligente réactive |
| **ML Prédictif** 🆕 | **Scikit-learn, TensorFlow, Prophet** | **Détection anomalies & prédictions** |
| **Auto-repair** | Bash, Python, Ansible | Exécution actions |
| **Interface** | Streamlit, Plotly, Slack API | Visualisation & interaction |
| **Infra** | Docker/K8s, Ubuntu Server | Déploiement |
| **Data Storage** | InfluxDB (time series), PostgreSQL | Historique ML |

---

## 📊 Répartition des efforts (réaliste avec ML)

| Phase | Tâches principales | Durée | % du projet |
|-------|-------------------|-------|-------------|
| **1. Étude & conception** | • Normes ZSM, NWDAF<br>• Architecture système<br>• Sélection outils<br>• **État de l'art ML pour télécoms** | 2.5 sem | 15% |
| **2. Setup Free5GC** | • Installation<br>• Configuration<br>• Tests de base | 1.5 sem | 9% |
| **3. Monitoring** | • Prometheus+Grafana<br>• Elasticsearch+Filebeat<br>• Dashboards | 2 sem | 12% |
| **4. Log processing** | • Parsing logs<br>• Extraction erreurs<br>• Structuration données | 1.5 sem | 9% |
| **5. Intégration IA générative** | • Setup LLM (local/API)<br>• Prompts engineering<br>• Tests réponses | 2 sem | 12% |
| **6. ML Prédictif** 🆕 | • **Collecte dataset historique**<br>• **Feature engineering**<br>• **Entraînement modèles**<br>• **Validation & tuning** | **2.5 sem** | **15%** |
| **7. Workflows n8n** | • Workflows détection<br>• Orchestration IA & ML<br>• Automatisations | 2 sem | 12% |
| **8. Auto-repair** | • Scripts réparation<br>• Actions préventives<br>• Sécurité & validation | 1.5 sem | 9% |
| **9. Interface** | • Dashboard Streamlit<br>• Visualisation prédictions<br>• Chatbot<br>• Notifications | 1.5 sem | 9% |
| **10. Tests & validation** | • Scénarios réactifs<br>• **Tests prédictifs**<br>• Mesures performances<br>• Documentation | 1.5 sem | 10% |

**Total** : ~16-17 semaines (4 mois)

---

## 🎯 Livrables équilibrés (avec ML)

### Livrables techniques :
1. ✅ Infrastructure Free5GC opérationnelle
2. ✅ Système de monitoring complet (dashboards Grafana)
3. ✅ Pipeline de traitement des logs (Elasticsearch)
4. ✅ Module d'analyse IA générative (diagnostic réactif)
5. ✅ **Modèle ML prédictif entraîné et déployé** 🆕
6. ✅ 5-7 workflows n8n (réactifs + prédictifs)
7. ✅ Scripts d'auto-réparation (3-5 scénarios)
8. ✅ Dashboard de supervision avec **prédictions temps réel** 🆕

### Livrables documentaires :
1. 📄 Rapport complet avec état de l'art (ML + IA générative)
2. 📊 Schémas d'architecture
3. 📚 Guide d'utilisation et déploiement
4. 📈 **Résultats ML** : précision, recall, faux positifs
5. 📈 Résultats tests (MTTR, taux de prévention)
6. 🎥 Vidéo démo (scénarios réactif + prédictif)

---

## 💡 Points forts du projet (équilibrés + ML)

| Aspect | Valeur apportée |
|--------|-----------------|
| **🏗️ Réseau 5G** | Maîtrise du Core Network moderne |
| **📊 Monitoring** | Observabilité temps réel professionnelle |
| **🤖 IA Générative** | Diagnostic intelligent post-incident |
| **🔮 ML Prédictif** 🆕 | **Anticipation des pannes, maintenance proactive** |
| **⚙️ Automatisation** | Réduction MTTR + prévention pannes |
| **🔗 Intégration** | Approche DevOps / AIOps / MLOps complète |
| **🎓 Pédagogique** | Couvre 3 domaines (réseau, IA, ML) |

---

## 📈 Indicateurs de performance (KPIs avec ML)

### KPIs Réactifs (existants)
| KPI | Objectif | Méthode |
|-----|----------|---------|
| **MTTR** | Réduction ≥ 70% | Comparaison manuel vs auto |
| **Précision diagnostic IA** | ≥ 85% | Validation humaine |
| **Taux résolution auto** | ≥ 75% | Nb pannes résolues / détectées |

### KPIs Prédictifs (nouveaux) 🆕
| KPI | Objectif | Méthode |
|-----|----------|---------|
| **Précision prédictions ML** | ≥ 80% | True Positives / (TP + FP) |
| **Recall (pannes détectées)** | ≥ 75% | TP / (TP + FN) |
| **Temps d'anticipation moyen** | 20-40 min | Moyenne temps avant panne |
| **Faux positifs** | ≤ 15% | FP / Total prédictions |
| **Pannes évitées** | ≥ 60% | Actions préventives réussies |

---

## 🔄 Interaction entre IA Générative et ML

```
┌─────────────────────────────────────────────────┐
│         COMPLÉMENTARITÉ IA + ML                 │
└─────────────────────────────────────────────────┘

ML PRÉDICTIF                     IA GÉNÉRATIVE
     │                                │
     │ 1. Détecte anomalie            │
     │    (score = 0.85)              │
     │                                │
     └──────────> n8n ───────────────┐
                  │                  │
                  │ 2. Collecte      │
                  │    contexte      │
                  │                  │
                  ├─────────────────>│
                  │                  │
                  │      3. "Analyse ces métriques  
                  │         anormales et suggère    
                  │         action préventive"      
                  │                  │
                  │<─────────────────┤
                  │                  │
                  │ 4. Recommandation│
                  │    + Explications│
                  │                  │
     ┌────────────▼──────────────────┘
     │ 5. Décision combinée:
     │    - ML dit "quoi" (anomalie)
     │    - IA dit "pourquoi" + "comment"
     │
     └────────> EXÉCUTION PRÉVENTIVE
```

**Exemple concret** :
- **ML** : "AMF a 83% de chances de crash dans 22 min (memory leak probable)"
- **IA Générative** : "Recommandation : redémarrage planifié dans 10 min pendant fenêtre de faible trafic. Impact estimé : 5s. Alternative : nettoyage manuel du cache si redémarrage non souhaité."

---

## 🚀 Extensions possibles (perspectives)

**Intégrées dans le projet principal** :
1. ✅ **Modèle ML prédictif** (détection anomalies + anticipation pannes)

**Pour futurs travaux** :
1. **Fine-tuning LLM** → Entraîner modèle spécifique sur logs Free5GC
2. **Multi-tenancy** → Gérer plusieurs slices indépendamment
3. **Conformité standards** → Alignement ETSI ZSM / 3GPP MDAF
4. **Interface conversationnelle** → Chatbot Slack/Teams intégré
5. **Reinforcement Learning** → Optimisation automatique des seuils d'alerte
6. **Prédiction multi-horizon** → Court terme (5 min) + Moyen terme (1h)

---

## 📝 Titre PFE suggéré (avec ML)

> **"Système intelligent d'auto-maintenance pour réseau 5G : monitoring, ML prédictif, IA générative et orchestration automatisée"**

Ou plus concis :
> **"Plateforme d'auto-guérison prédictive pour réseau 5G Core basée sur ML et IA générative"**

Ou orienté innovation :
> **"Du réactif au proactif : système autonome de maintenance 5G par ML prédictif et IA générative"**

---

## 🎬 Conclusion

Ce projet équilibre **5 piliers technologiques majeurs** :

1. **🏗️ Réseau 5G** (fondation télécoms)
2. **📊 Observabilité** (monitoring professionnel)
3. **🔮 Machine Learning** (prédiction proactive) 🆕
4. **🤖 IA Générative** (diagnostic intelligent)
5. **⚙️ Automatisation** (orchestration et exécution)

### Valeur ajoutée du ML prédictif

| Aspect | Avant (réactif seulement) | Après (réactif + prédictif) |
|--------|---------------------------|------------------------------|
| **Intervention** | Après la panne | **Avant la panne** ✨ |
| **Impact utilisateur** | Interruption service | **Transparent** ✨ |
| **MTTR** | 2-10 minutes | **0 minute** (prévenu) ✨ |
| **Coût** | Perte revenus + réparation | **Maintenance planifiée** ✨ |
| **Disponibilité** | 99.9% | **≥99.99%** ✨ |

---

Veux-tu maintenant :
1. 📄 **Une fiche PFE formelle complète** (avec toute la partie ML détaillée) ?
2. 🎨 **Un schéma d'architecture détaillé** (incluant les flux ML) ?
3. 📋 **Un guide pratique pour démarrer le ML** (datasets, modèles, code) ?
4. 📊 **Des exemples de visualisations** pour le dashboard Streamlit ?

Dis-moi ce qui t'aiderait le plus ! 🚀
